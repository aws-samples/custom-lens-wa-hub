{
    "schemaVersion": "2021-11-01",
    "_version":"1.1",
    "_release_date":"2023-06-01",
    "_release_note":"Added Sustainability pillar",
    "_teams":{
        "_authors":[
            {
                "name":"Karthik Vijayraghavan, Sr.Manager NoSQL DB Specialist SA, WWSO Database, AWS",
                "email":"kvijayra@amazon.com"
            },
            {
                "name":"Jack Hsu, Partner Solutions Architect, Taiwan, AWS",
                "email":"jackhsu@amazon.com"
            }            
        ],
        "_tech_reviewers":[             
            {
                "name":"Bob Yeh, Well-Architected Geo SA, APAC",
                "note":"Issue found - 'dollar-sign' required to describe the variable in the question. "
            }
      ]
    },
    "name": "Amazon DocumentDB Best Practices",
    "description": "Amazon DocumentDB Best Practices",
    "pillars": [
        {
            "id": "docdb_ops",
            "name": "Operational Excellence",
            "questions": [
                {
                    "id": "docdb_ops1",
                    "title": "How do you deploy Amazon DocumentDB clusters across regions / environments?",
                    "description": "Critical workloads with a global footprint have strict availability requirements and may need to tolerate a region-wide outage",
                    "choices": [
                        {
                            "id": "docdb_ops1_1",
                            "title": "Use Cloud Formation template for consistent environment configuration across regions / accounts.",
                            "helpfulResource": {
                                "displayText": "AWS CloudFormation is a service that helps you model and set up your AWS resources so that you can spend less time managing those resources and more time focusing on your applications that run in AWS.",
                                "url": "https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/Welcome.html"
                            },
                            "improvementPlan": {
                                "displayText": "Use Cloud Formation template for consistent environment configuration across regions / accounts.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/quick_start_cfn.html"
                            }
                        },
                        {
                            "id": "docdb_ops1_3",
                            "title": "Configure subnet groups with 3 AZs with minimum 2 instances.",
                            "helpfulResource": {
                                "displayText": "Each DB subnet group should have subnets in at least two Availability Zones in a given Region. When creating a DB cluster in a VPC, you must select a DB subnet group. Amazon DocumentDB uses that DB subnet group and your preferred Availability Zone to select a subnet and an IP address within that subnet to associate with your cluster.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/document-db-subnet-groups.html"
                            },
                            "improvementPlan": {
                                "displayText": "Amazon DocumentDB instances can be provisioned in up to three AZs.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/document-db-subnet-group-create.html"
                            }
                        },
                        {
                            "id": "docdb_ops1_4",
                            "title": "Use Cluster endpoint",
                            "helpfulResource": {
                                "displayText": "A cluster endpoint is an endpoint for an Amazon DocumentDB cluster that connects to the current primary instance for the cluster.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/endpoints.html"
                            },
                            "improvementPlan": {
                                "displayText": "You can find a cluster's cluster endpoint and reader endpoint using the Amazon DocumentDB console or AWS CLI.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/db-cluster-endpoints-find.html"
                            }
                        },
                        {
                            "id": "docdb_ops1_5",
                            "title": "Script global cluster failover and externalize endpoint lookup for applications",
                            "helpfulResource": {
                                "displayText": "Failover is automatically handled by Amazon DocumentDB so that your applications can resume database operations as quickly as possible without administrative intervention.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/failover.html"
                            },
                            "improvementPlan": {
                                "displayText": "Amazon DocumentDB provides multiple connection options to serve a wide range of use cases.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/how-it-works.html#how-it-works.endpoints"
                            }
                        },
                        {
                            "id": "docdb_ops1_6",
                            "title": "None of above",
                            "helpfulResource": {
                                "displayText": "-"
                            },
                            "improvementPlan": {
                                "displayText": "-"
                            }
                        }
                    ],
		    "riskRules": [
                        {
                            "condition": "docdb_ops1_1 && docdb_ops1_3 && docdb_ops1_4 && docdb_ops1_5 && docdb_ops1_6",
                            "risk": "NO_RISK"
                        },
                        {
                            "condition": "(!docdb_ops1_1) || (!docdb_ops1_3) || (!docdb_ops1_4) || (!docdb_ops1_6)",
                            "risk": "HIGH_RISK"
                        },
                        {
                            "condition": "default",
                            "risk": "MEDIUM_RISK"
                        }
                    ]
                },
                {
                    "id": "docdb_ops2",
                    "title": "How do you track and test changes to cluster configuration?",
                    "description": "Controlled changes are necessary to deploy new functionality. If these changes are uncontrolled, then it makes it difficult to predict the effect of these changes or to address issues that arise because of them.",
                    "choices": [
                        {
                            "id": "docdb_ops2_1",
                            "title": "Define AWS config rules to validate Amazon DocumentDB best practices",
                            "helpfulResource": {
                                "displayText": "AWS Config allows you to create rules and configure resources so they comply with the standards enforced by your organization.",
                                "url": "https://aws.amazon.com/blogs/database/evaluate-amazon-documentdb-with-mongodb-compatibility-configurations-using-aws-config/"
                            },
                            "improvementPlan": {
                                "displayText": "Use AWS Config managed rules for evaluating and validating Amazon DocumentDB for best practices",
                                "url": "https://aws.amazon.com/blogs/database/evaluate-amazon-documentdb-with-mongodb-compatibility-configurations-using-aws-config/"
                            }
                        },
                        {
                            "id": "docdb_ops2_2",
                            "title": "Trigger AWS CloudWatch events rules for AWS config events",
                            "helpfulResource": {
                                "displayText": "When the trigger for a rule occurs, AWS Config invokes the rule's AWS Lambda function by publishing an event",
                                "url": "https://docs.aws.amazon.com/config/latest/developerguide/evaluate-config_develop-rules_example-events.html"
                            },
                            "improvementPlan": {
                                "displayText": "Trigger AWS CloudWatch events rules for AWS config events",
                                "url": "https://docs.aws.amazon.com/config/latest/developerguide/evaluate-config_develop-rules_example-events.html"
                            }
                        },
                        {
                            "id": "docdb_ops2_3",
                            "title": "Benchmark Amazon DocumentDB cluster for performance",
                            "helpfulResource": {
                                "displayText": "Monitor performance metrics on a regular basis to see the average, maximum, and minimum values for a variety of time ranges.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/best_practices.html#best_practices-performance"
                            },
                            "improvementPlan": {
                                "displayText": "Benchmark Amazon DocumentDB cluster for performance",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/best_practices.html#best_practices-performance"
                            }
                        },
                        {
                            "id": "docdb_ops2_4",
                            "title": "None of above",
                            "helpfulResource": {
                                "displayText": "-"
                            },
                            "improvementPlan": {
                                "displayText": "-"
                            }
                        }
                    ],
                    "riskRules": [
                        {
                            "condition": "docdb_ops2_1 && docdb_ops2_2 && docdb_ops2_3 && docdb_ops2_4",
                            "risk": "NO_RISK"
                        },
                        {
                            "condition": "(!docdb_ops2_3) || (!docdb_ops2_4)",
                            "risk": "HIGH_RISK"
                        },
                        {
                            "condition": "default",
                            "risk": "MEDIUM_RISK"
                        }
                    ]
                },
                {
                    "id": "docdb_ops3",
                    "title": "How do you evaluate operational readiness of your workload?",
                    "description": "\nEvaluate the operational readiness of your workload, processes, procedures and personnel to understand the operational risks related to your workload.",
                    "choices": [
                        {
                            "id": "docdb_ops3_1",
                            "title": "Use AWS IAM to control access to Amazon DocumentDB resources",
                            "helpfulResource": {
                                "displayText": "Every AWS resource is owned by an AWS account and permissions to create or access the resources are governed by permissions policies. An account administrator can attach permissions policies to IAM identities.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/UsingWithRDS.IAM.AccessControl.Overview.html"
                            },
                            "improvementPlan": {
                                "displayText": "Use AWS IAM to control access to Amazon DocumentDB resources",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/UsingWithRDS.IAM.AccessControl.Overview.html"
                            }
                        },
                        {
                            "id": "docdb_ops3_2",
                            "title": "Use playbooks to define operational readiness",
                            "helpfulResource": {
                                "displayText": "Runbooks are documented procedures to achieve specific outcomes. Enable consistent and prompt responses to well-understood events by documenting procedures in runbooks.",
                                "url": "https://docs.aws.amazon.com/wellarchitected/latest/framework/a-prepare.html"
                            },
                            "improvementPlan": {
                                "displayText": "Use playbooks to define operational readiness. ",
                                "url": "https://docs.aws.amazon.com/wellarchitected/latest/framework/a-prepare.html"
                            }
                        },
                        {
                            "id": "docdb_ops3_3",
                            "title": "Run periodic readiness tests, according to existing playbooks",
                            "helpfulResource": {
                                "displayText": "Implement runbooks as code and trigger the execution of runbooks in response to events, where appropriate, to ensure consistency, speed responses and reduce errors caused by manual processes.",
                                "url": "https://docs.aws.amazon.com/wellarchitected/latest/framework/a-prepare.html"
                            },
                            "improvementPlan": {
                                "displayText": "Periodically running readiness tests according to existing playbooks",
                                "url": "https://docs.aws.amazon.com/wellarchitected/latest/framework/a-prepare.html"
                            }
                        },
                        {
                            "id": "docdb_ops3_4",
                            "title": "None of above",
                            "helpfulResource": {
                                "displayText": "-"
                            },
                            "improvementPlan": {
                                "displayText": "-"
                            }
                        }
                    ],
                    "riskRules": [
                        {
                            "condition": "docdb_ops3_1 && docdb_ops3_2 && docdb_ops3_3 && docdb_ops3_4",
                            "risk": "NO_RISK"
                        },
                        {
                            "condition": "(!docdb_ops3_4)",
                            "risk": "HIGH_RISK"
                        },
                        {
                            "condition": "default",
                            "risk": "MEDIUM_RISK"
                        }
                    ]
                },
                {
                    "id": "docdb_ops4",
                    "title": "How do you monitor your Amazon DocumentDB cluster(s)?",
                    "description": "Define, capture, and analyze workload metrics to gain visibility to workload events and take appropriate action.",
                    "choices": [
                        {
                            "id": "docdb_ops4_1",
                            "title": "Configure application to log database connectivity response times & errors.",
                            "helpfulResource": {
                                "displayText": "-"
                            },
                            "improvementPlan": {
                                "displayText": "-"
                            }
                        },
                        {
                            "id": "docdb_ops4_2",
                            "title": "Create AWS CloudWatch dashboard and alarms for key metrics and application logs.",
                            "helpfulResource": {
                                "displayText": "Amazon CloudWatch dashboards are customizable home pages in the CloudWatch console that you can use to monitor your resources in a single view, even those resources that are spread across different Regions.",
                                "url": "https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/CloudWatch_Dashboards.html"
                            },
                            "improvementPlan": {
                                "displayText": "Create AWS CloudWatch dashboard and alarms for key metrics and application logs.",
                                "url": "https://catalog.us-east-1.prod.workshops.aws/workshops/464d6c17-9faa-4fef-ac9f-dd49610174d3/monitoring"
                            }
                        },
                        {
                            "id": "docdb_ops4_3",
                            "title": "Define log insight queries for profiler and audit logs",
                            "helpfulResource": {
                                "displayText": "Amazon DocumentDB has a profiler that logs any database operations that take longer than some period of time (e.g. 100 ms). You can use the profiler logs to identify queries that are taking a long time to run.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/profiling.html"
                            },
                            "improvementPlan": {
                                "displayText": "Define log insight queries for profiler and audit logs",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/profiling.html"
                            }
                        },
                        {
                            "id": "docdb_ops4_4",
                            "title": "Tag instances for organization, identification and cost accounting",
                            "helpfulResource": {
                                "displayText": "You can use Amazon DocumentDB (with MongoDB compatibility) tags to add metadata to your Amazon DocumentDB resources. These tags can be used with AWS Identity and Access Management (IAM) policies to manage access to Amazon DocumentDB resources and to control what actions can be applied to the resources.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/tagging.html"
                            },
                            "improvementPlan": {
                                "displayText": "Tag instances for organization, identification and cost accounting",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/tagging.html"
                            }
                        },
                        {
                            "id": "docdb_ops4_5",
                            "title": "None of above",
                            "helpfulResource": {
                                "displayText": "-"
                            },
                            "improvementPlan": {
                                "displayText": "-"
                            }
                        }
                    ],
                    "riskRules": [
                        {
                            "condition": "docdb_ops4_1 && docdb_ops4_2 && docdb_ops4_3",
                            "risk": "NO_RISK"
                        },
                        {
                            "condition": "(!docdb_ops4_2) || (!docdb_ops4_3)",
                            "risk": "HIGH_RISK"
                        },
                        {
                            "condition": "default",
                            "risk": "MEDIUM_RISK"
                        }
                    ]
                },
                {
                    "id": "docdb_ops6",
                    "title": "How do you manage lifecycle of manual snapshots?",
                    "description": "A manual snapshot is a full backup that is deleted only when you manually delete it using the AWS Management Console or AWS CLI. You cannot manually delete an automatic snapshot because automatic snapshots are deleted only when the snapshot's retention period expires or you delete the snapshot's cluster.",
                    "choices": [
                        {
                            "id": "docdb_ops6_2",
                            "title": "Create jobs to periodically remove manual snapshots",
                            "helpfulResource": {
                                "displayText": "A manual snapshot is a full backup that is deleted only when you manually delete it using the AWS Management Console or AWS CLI.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/backup_restore-compare_automatic_manual_snapshots.html"
                            },
                            "improvementPlan": {
                                "displayText": "Create jobs to periodically remove manual snapshots.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/best_practices.html#best_practices-cost_optimization"
                            }
                        },
                        {
                            "id": "docdb_ops6_3",
                            "title": "Use AWS Backup to centrally manage Amazon DocumentDB backup",
                            "helpfulResource": {
                                "displayText": "With AWS Backup you can centrally manage and govern the data protection policy of Amazon DocumentDB snapshots, alongside other supported AWS services.",
                                "url": "https://aws.amazon.com/blogs/storage/manage-backup-and-restore-of-amazon-documentdb-with-aws-backup/"
                            },
                            "improvementPlan": {
                                "displayText": "Use AWS Backup to centrally manage Amazon DocumentDB backup.",
                                "url": "https://aws.amazon.com/blogs/storage/manage-backup-and-restore-of-amazon-documentdb-with-aws-backup/"
                            }
                        },
                        {
                            "id": "docdb_ops6_4",
                            "title": "None of above",
                            "helpfulResource": {
                                "displayText": "-"
                            },
                            "improvementPlan": {
                                "displayText": "-"
                            }
                        }
                    ],
                    "riskRules": [
                        {
                            "condition": "docdb_ops6_2 && docdb_ops6_3 && docdb_ops6_4",
                            "risk": "NO_RISK"
                        },
                        {
                            "condition": "(!docdb_ops6_4)",
                            "risk": "HIGH_RISK"
                        },
                        {
                            "condition": "default",
                            "risk": "MEDIUM_RISK"
                        }
                    ]
                }
            ]
        },
        {
            "id": "docdb_perf",
            "name": "Performance Efficiency",
            "questions": [
                {
                    "id": "docdb_perf1",
                    "title": "What are your query access patterns?",
                    "description": "Access patterns for the application dictate the schema structure of documents stored in the database. Schema flexibility offered by JSON allows you to make changes quickly, making document databases an ideal choice for agile development.",
                    "choices": [
                        {
                            "id": "docdb_perf1_1",
                            "title": "Optimize access patterns for compute , NOT storage",
                            "helpfulResource": {
                                "displayText": "Storing infrequently accessed fields in a separate document helps reduce I/O utilization and improve performance.",
                                "url": "https://aws.amazon.com/blogs/database/document-modeling-with-amazon-documentdb-and-hackolade/"
                            },
                            "improvementPlan": {
                                "displayText": "When mutable and immutable parts of the documents are separated, performance and I/O optimization is optimized because updates modify smaller mutable documents."
                            }
                        },
                        {
                            "id": "docdb_perf1_2",
                            "title": "Document size smaller than 8KB",
                            "helpfulResource": {
                                "displayText": "I/Os are input/output operations performed by Amazon DocumentDB against a solid state drive (SSD)-based virtualized storage layer. Every database page read operation counts as one I/O.",
                                "url": "https://aws.amazon.com/documentdb/faqs/?nc1=h_ls"
                            },
                            "improvementPlan": {
                                "displayText": "-"
                            }
                        },
                        {
                            "id": "docdb_perf1_3",
                            "title": "Separate mutable & immutable parts of document",
                            "helpfulResource": {
                                "displayText": "Amazon DocumentDB issues reads against the storage layer in order to fetch pages not present in the buffer cache. Each page is 8 KB in Amazon DocumentDB. When mutable and immutable parts of the documents are separated, performance and I/O optimization is optimized because updates modify smaller mutable documents.",
                                "url": "https://aws.amazon.com/blogs/database/document-modeling-with-amazon-documentdb-and-hackolade/"
                            },
                            "improvementPlan": {
                                "displayText": "Separate mutable & immutable parts of document",
                                "url": "https://aws.amazon.com/blogs/database/document-modeling-with-amazon-documentdb-and-hackolade/"
                            }
                        },
                        {
                            "id": "docdb_perf1_4",
                            "title": "Use logical modeling and selective denormalization",
                            "helpfulResource": {
                                "displayText": "Use selective denormalization to logically model your entity. In document databases, its a common practice to duplicate data. But ensure that you dont increase the document size significantly by excessive denormalization",
                                "url": "https://aws.amazon.com/blogs/database/document-modeling-with-amazon-documentdb-and-hackolade/"
                            },
                            "improvementPlan": {
                                "displayText": "Use logical modeling and selective denormalization",
                                "url": "https://aws.amazon.com/blogs/database/document-modeling-with-amazon-documentdb-and-hackolade/"
                            }
                        },
                        {
                            "id": "docdb_perf1_5",
                            "title": "Use index in fields with high cardinality",
                            "helpfulResource": {
                                "displayText": "By choosing fields that have high cardinality, such as an identity field, you increase the index selectivity. Conversely, choosing a low cardinality field, such as Boolean where there are only two unique values, can retrieve more information than is needed, which increases memory usage and the risk of going into the distributed storage volume. The goal with index selectivity is to allow the query to filter as much data as possible up front, thereby letting the query processor do less work.",
                                "url": "https://aws.amazon.com/blogs/database/how-to-index-on-amazon-documentdb-with-mongodb-compatibility/"
                            },
                            "improvementPlan": {
                                "displayText": "Use index in fields with high cardinality",
                                "url": "https://aws.amazon.com/blogs/database/how-to-index-on-amazon-documentdb-with-mongodb-compatibility/"
                            }
                        },
                        {
                            "id": "docdb_perf1_6",
                            "title": "None of above",
                            "helpfulResource": {
                                "displayText": "-"
                            },
                            "improvementPlan": {
                                "displayText": "-"
                            }
                        }
                    ],
                    "riskRules": [
                        {
                            "condition": "docdb_perf1_1 && docdb_perf1_2 && docdb_perf1_3 && docdb_perf1_4 && docdb_perf1_5 && docdb_perf1_6",
                            "risk": "NO_RISK"
                        },
                        {
                            "condition": "(!docdb_perf1_1) || (!docdb_perf1_3) || (!docdb_perf1_5) || (!docdb_perf1_6)",
                            "risk": "HIGH_RISK"
                        },
                        {
                            "condition": "default",
                            "risk": "MEDIUM_RISK"
                        }
                    ]
                },
                {
                    "id": "docdb_perf2",
                    "title": "How does your application access data?",
                    "description": "How you access data will affect how the application performs. Access patterns define how the users and the system access the data to satisfy business needs.",
                    "choices": [
                        {
                            "id": "docdb_perf2_1",
                            "title": "Use bulk operations over individual",
                            "helpfulResource": {
                                "displayText": "You can run bulk update and insert operations for multiple records using a multi-statement. This will reduce the amount of connections and roundtrips between the database and client."
                            },
                            "improvementPlan": {
                                "displayText": "Use bulk operations over individual"
                            }
                        },
                        {
                            "id": "docdb_perf2_2",
                            "title": "Use operators with optimizations such as $hint, $project",
                            "helpfulResource": {
                                "displayText": "Customers who want control over their query plan can use the $hint operator to enforce selection of a preferred index. Use (0024)project to return only those fields you need so as to avoid processing more data than is necessary."
                            },
                            "improvementPlan": {
                                "displayText": "Use operators with optimizations like (0024)hint, (0024)project"
                            }
                        },
                        {
                            "id": "docdb_perf2_3",
                            "title": "Avoid sub optimal operators like (0024)distinct (for multi key), (0024)ne,(0024)nin",
                            "helpfulResource": {
                                "displayText": "Avoidsub-optimaloperators like aggregation operator (0024)distinct,Comparison Operators (0024)ne, (0024)nin"
                            },
                            "improvementPlan": {
                                "displayText": "Avoid sub optimal operators like (0024)distinct (for multi key), (0024)ne,(0024)nin"
                            }
                        },
                        {
                            "id": "docdb_perf2_4",
                            "title": "None of above",
                            "helpfulResource": {
                                "displayText": "-"
                            },
                            "improvementPlan": {
                                "displayText": "-"
                            }
                        }
                    ],
                    "riskRules": [
                        {
                            "condition": "docdb_perf2_1 && docdb_perf2_2 && docdb_perf2_3 && docdb_perf2_4",
                            "risk": "NO_RISK"
                        },
                        {
                            "condition": "(!docdb_perf2_2) || (!docdb_perf2_4)",
                            "risk": "HIGH_RISK"
                        },
                        {
                            "condition": "default",
                            "risk": "MEDIUM_RISK"
                        }
                    ]
                },
                {
                    "id": "docdb_perf3",
                    "title": "How do your customers, across the globe, access data?",
                    "description": "If you have offices around the world, you can use a global cluster to keep your main sources of information updated in the primary region.",
                    "choices": [
                        {
                            "id": "docdb_perf3_1",
                            "title": "Leverage global clusters for local reads per region.",
                            "helpfulResource": {
                                "displayText": "A global cluster consists of one primary region and up to five, read-only, secondary regions.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/global-clusters.html"
                            },
                            "improvementPlan": {
                                "displayText": "Issue write operations directly to the primary cluster in the primary region and Amazon DocumentDB automatically replicates the data to the secondary regions using dedicated infrastructure."
                            }
                        },
                        {
                            "id": "docdb_perf3_2",
                            "title": "None of above",
                            "helpfulResource": {
                                "displayText": "-"
                            },
                            "improvementPlan": {
                                "displayText": "-"
                            }
                        }
                    ],
                    "riskRules": [
                        {
                            "condition": "docdb_perf3_1 && docdb_perf3_2",
                            "risk": "NO_RISK"
                        },
                        {
                            "condition": "(!docdb_perf3_2)",
                            "risk": "HIGH_RISK"
                        },
                        {
                            "condition": "default",
                            "risk": "MEDIUM_RISK"
                        }
                    ]
                },
                {
                    "id": "docdb_perf4",
                    "title": "How does your application connect to your Amazon DocumentDB cluster(s)?",
                    "description": "",
                    "choices": [
                        {
                            "id": "docdb_perf4_1",
                            "title": "Connect as replica set and use replica reads for scalability.",
                            "helpfulResource": {
                                "displayText": "Amazon DocumentDB has three endpoints that you can use to connect to your cluster:\nCluster endpoint\nReader endpoint\nInstance endpoints",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/connect-to-replica-set.html"
                            },
                            "improvementPlan": {
                                "displayText": "If the application can handle eventual consistency, we recommend that you connect to your cluster as a replica set and distribute reads to replica instances using the built-in read preference capabilities of your driver."
                            }
                        },
                        {
                            "id": "docdb_perf4_2",
                            "title": "Deploy the application in same AZs as the Amazon DocumentDB cluster.",
                            "helpfulResource": {
                                "displayText": "Amazon DocumentDB provides you the ability to place resources, such as instances, and data in multiple locations.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/regions-and-azs.html"
                            },
                            "improvementPlan": {
                                "displayText": "Deploy the application in same AZs as the Amazon DocumentDB cluster."
                            }
                        },
                        {
                            "id": "docdb_perf4_3",
                            "title": "None of above",
                            "helpfulResource": {
                                "displayText": "-"
                            },
                            "improvementPlan": {
                                "displayText": "-"
                            }
                        }
                    ],
                    "riskRules": [
                        {
                            "condition": "docdb_perf4_1 && docdb_perf4_2 && docdb_perf4_3",
                            "risk": "NO_RISK"
                        },
                        {
                            "condition": "(!docdb_perf4_1) || (!docdb_perf4_3)",
                            "risk": "HIGH_RISK"
                        },
                        {
                            "condition": "default",
                            "risk": "MEDIUM_RISK"
                        }
                    ]
                },
                {
                    "id": "docdb_perf5",
                    "title": "How many concurrent requests does the application support?",
                    "description": "To optimize instance performance and response time, it is recommended to evaluate database connection constraints when observing a significant increase in user connections. The appropriate number of user connections for your instance depends on factors such as the instance class and the complexity of the operations being executed.",
                    "choices": [
                        {
                            "id": "docdb_perf5_1",
                            "title": "Configure workload specific connection parameters.",
                            "helpfulResource": {
                                "displayText": "Configure workload specific connection parameters.",
                                "url": "https://aws.amazon.com/blogs/database/building-resilient-applications-with-amazon-documentdb-with-mongodb-compatibility-part-1-client-configuration/"
                            },
                            "improvementPlan": {
                                "displayText": "Configure workload specific connection parameters.",
                                "url": "https://aws.amazon.com/blogs/database/building-resilient-applications-with-amazon-documentdb-with-mongodb-compatibility-part-1-client-configuration/"
                            }
                        },
                        {
                            "id": "docdb_perf5_2",
                            "title": "Validate instance size against connection limits.",
                            "helpfulResource": {
                                "displayText": "The following table describes Amazon DocumentDB limits per instance.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/limits.html#limits.instance"
                            },
                            "improvementPlan": {
                                "displayText": "Validate instance size against connection limits\n\nLimit Connections : CoudWatch metrics DatabaseConnectionsMax\nThe maximum number of open database connections on an instance in a one-minute period.\n",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/limits.html#limits.instance"
                            }
                        },
                        {
                            "id": "docdb_perf5_3",
                            "title": "None of above",
                            "helpfulResource": {
                                "displayText": "-"
                            },
                            "improvementPlan": {
                                "displayText": "-"
                            }
                        }
                    ],
                    "riskRules": [
                        {
                            "condition": "docdb_perf5_1 && docdb_perf5_2 && docdb_perf5_3",
                            "risk": "NO_RISK"
                        },
                        {
                            "condition": "(!docdb_perf5_1) || (!docdb_perf5_2) || (!docdb_perf5_3)",
                            "risk": "HIGH_RISK"
                        },
                        {
                            "condition": "default",
                            "risk": "MEDIUM_RISK"
                        }
                    ]
                },
                {
                    "id": "docdb_perf6",
                    "title": "How did you size your cluster?",
                    "description": "Continuous right sizing is a crucial practice for cost control in the cloud environment. It entails regularly assessing the performance, usage patterns, and requirements of instances, and taking appropriate actions such as turning off idle instances and optimizing instances that are either overprovisioned or not well-suited for the workload. By adopting this approach, you can effectively manage cloud costs while ensuring optimal resource allocation.",
                    "choices": [
                        {
                            "id": "docdb_perf6_1",
                            "title": "Use data characteristics to size workload.",
                            "helpfulResource": {
                                "displayText": "Use this simple form to provide aggregated input for your workload to determine cluster sizing.\n\nThis form provides sizing recommendation for a single collection in the cluster.",
                                "url": "https://sizing.cloudnativedb.com/"
                            },
                            "improvementPlan": {
                                "displayText": "Use data characteristics to size workload.",
                                "url": "https://sizing.cloudnativedb.com/"
                            }
                        },
                        {
                            "id": "docdb_perf6_2",
                            "title": "Ensure Indices and working set fit in cache.",
                            "helpfulResource": {
                                "displayText": "One of Amazon DocumentDB best practice is to choose an instance type with enough RAM to fit your working set (i.e., data and indexes) in memory.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/best_practices.html"
                            },
                            "improvementPlan": {
                                "displayText": "Having properly sized instances will help optimize for overall performance and potentially minimize I/O cost."
                            }
                        },
                        {
                            "id": "docdb_perf6_3",
                            "title": "Validate sizing by performing load test and scale as needed.",
                            "helpfulResource": {
                                "displayText": "Visualize the load to determine when and where the load is on the database",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/performance-insights.html"
                            },
                            "improvementPlan": {
                                "displayText": "Performance Insights adds to the existing Amazon DocumentDB monitoring features to illustrate your cluster performance and help you analyze any issues that affect it. With the Performance Insights dashboard, you can visualize the database load and filter the load by waits, query statements, hosts, or application."
                            }
                        },
                        {
                            "id": "docdb_perf6_4",
                            "title": "None of above",
                            "helpfulResource": {
                                "displayText": "-"
                            },
                            "improvementPlan": {
                                "displayText": "-"
                            }
                        }
                    ],
                    "riskRules": [
                        {
                            "condition": "docdb_perf6_1 && docdb_perf6_2 && docdb_perf6_3 && docdb_perf6_4",
                            "risk": "NO_RISK"
                        },
                        {
                            "condition": "(!docdb_perf6_2) || (!docdb_perf6_3) || (!docdb_perf6_4)",
                            "risk": "HIGH_RISK"
                        },
                        {
                            "condition": "default",
                            "risk": "MEDIUM_RISK"
                        }
                    ]
                },
                {
                    "id": "docdb_perf7",
                    "title": "How do you monitor performance of your cluster?",
                    "description": "Monitor performance metrics on a regular basis to see the average, maximum, and minimum values for a variety of time ranges. This helps you identify when performance is degraded.",
                    "choices": [
                        {
                            "id": "docdb_perf7_1",
                            "title": "Monitor performance to determine scaling needs.",
                            "helpfulResource": {
                                "displayText": "Amazon DocumentDB best practice is to choose an instance type with enough RAM to fit your working set (i.e. most frequently accessed data and indexes). Having properly sized instances will help optimize for overall performance and potentially minimize I/O cost.",
                                "url": "https://aws.amazon.com/blogs/database/monitoring-metrics-and-setting-up-alarms-on-your-amazon-documentdb-with-mongodb-compatibility-clusters/"
                            },
                            "improvementPlan": {
                                "displayText": "You can monitor Amazon DocumentDB Metrics at the cluster or instance level. In addition, other services can use the metrics, such as Amazon Simple Notification Service (Amazon SNS) to set notification alarms when a metric breaches a predefined threshold.",
                                "url": "https://aws.amazon.com/blogs/database/monitoring-metrics-and-setting-up-alarms-on-your-amazon-documentdb-with-mongodb-compatibility-clusters/"
                            }
                        },
                        {
                            "id": "docdb_perf7_2",
                            "title": "Implement autoscaling",
                            "helpfulResource": {
                                "displayText": "Automatically add or remove read replicas based on cluster load.",
                                "url": "https://aws.amazon.com/blogs/database/amazon-documentdb-with-mongodb-compatibility-read-autoscaling/"
                            },
                            "improvementPlan": {
                                "displayText": "Implement autoscaling.",
                                "url": "https://aws.amazon.com/blogs/database/amazon-documentdb-with-mongodb-compatibility-read-autoscaling/"
                            }
                        },
                        {
                            "id": "docdb_perf7_3",
                            "title": "None of above",
                            "helpfulResource": {
                                "displayText": "-"
                            },
                            "improvementPlan": {
                                "displayText": "-"
                            }
                        }
                    ],
                    "riskRules": [
                        {
                            "condition": "docdb_perf7_1 && docdb_perf7_2 && docdb_perf7_3",
                            "risk": "NO_RISK"
                        },
                        {
                            "condition": "(!docdb_perf7_1) || (!docdb_perf7_3)",
                            "risk": "HIGH_RISK"
                        },
                        {
                            "condition": "default",
                            "risk": "MEDIUM_RISK"
                        }
                    ]
                }
            ]
        },
        {
            "id": "docdb_rel",
            "name": "Reliability",
            "questions": [
                {
                    "id": "docdb_rel1",
                    "title": "How are you meeting your RPO and RTO with Amazon DocumentDB?",
                    "description": "Recovery from disaster is typically measured using values for RTO and RPO.\nRecovery time objective (RTO) is the maximum acceptable delay between the interruption of service and restoration of service. In other words, RTO measures downtime. For a global cluster, RTO can be in the order of minutes.\nRecovery point objective (RPO) is the maximum acceptable amount of time since the last data recovery point. For a global cluster, RPO is typically measured in seconds.",
                    "choices": [
                        {
                            "id": "docdb_rel1_1",
                            "title": "Select backup retention period based on RPO",
                            "helpfulResource": {
                                "displayText": "Amazon DocumentDB (with MongoDB compatibility) continuously backs up your data to Amazon Simple Storage Service (Amazon S3) for up to 35 days, so that you can quickly restore to any point within the backup retention period.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/backup_restore.html"
                            },
                            "improvementPlan": {
                                "displayText": "Select backup retention period based on RPO",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/backup_restore.html"
                            }
                        },
                        {
                            "id": "docdb_rel1_2",
                            "title": "Use global clusters for low RTO requirements",
                            "helpfulResource": {
                                "displayText": "A global cluster consists of one primary region and up to five read-only secondary regions. You issue write operations directly to the primary cluster in the primary region and Amazon DocumentDB automatically replicates the data to the secondary regions using dedicated infrastructure. Latency is typically under a second.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/global-clusters.html"
                            },
                            "improvementPlan": {
                                "displayText": "A global cluster consists of one primary region and up to five read-only secondary regions. You issue write operations directly to the primary cluster in the primary region and Amazon DocumentDB automatically replicates the data to the secondary regions using dedicated infrastructure. Latency is typically under a second.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/global-clusters.html"
                            }
                        },
                        {
                            "id": "docdb_rel1_3",
                            "title": "Retain manual snapshots beyond retention period based on purge requirements",
                            "helpfulResource": {
                                "displayText": "You can create a manual snapshot using either the AWS Management Console or AWS CLI. The amount of time it takes to create a snapshot varies with the size of your databases. When you create a snapshot, you must do the following:",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/backup_restore-create_manual_cluster_snapshot.html"
                            },
                            "improvementPlan": {
                                "displayText": "Retain manual snapshots beyond retention period based on purge requirements",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/backup_restore-create_manual_cluster_snapshot.html"
                            }
                        },
                        {
                            "id": "docdb_rel1_4",
                            "title": "None of above",
                            "helpfulResource": {
                                "displayText": "-"
                            },
                            "improvementPlan": {
                                "displayText": "-"
                            }
                        }
                    ],
                    "riskRules": [
                        {
                            "condition": "docdb_rel1_1 && docdb_rel1_2 && docdb_rel1_3 && docdb_rel1_4",
                            "risk": "NO_RISK"
                        },
                        {
                            "condition": "(!docdb_rel1_1) || (!docdb_rel1_2) || (!docdb_rel1_4)",
                            "risk": "HIGH_RISK"
                        },
                        {
                            "condition": "default",
                            "risk": "MEDIUM_RISK"
                        }
                    ]
                },
                {
                    "id": "docdb_rel2",
                    "title": "How do you support Disaster Recovery (DR) requirements?",
                    "description": "Disaster recovery strategies available to you within AWS can be broadly categorized into four approaches, ranging from the low cost and low complexity of making backups to more complex strategies using multiple active Regions.",
                    "choices": [
                        {
                            "id": "docdb_rel2_1",
                            "title": "Use global clusters for DR requirements",
                            "helpfulResource": {
                                "displayText": "A global cluster consists of one primary region and up to five read-only secondary regions. You issue write operations directly to the primary cluster in the primary region and Amazon DocumentDB automatically replicates the data to the secondary regions using dedicated infrastructure. Latency is typically under a second.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/global-clusters.html"
                            },
                            "improvementPlan": {
                                "displayText": "Use global clusters for DR requirements",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/global-clusters.html"
                            }
                        },
                        {
                            "id": "docdb_rel2_2",
                            "title": "Use cluster snapshot copy for flexible RTO requirements",
                            "helpfulResource": {
                                "displayText": "In Amazon DocumentDB, you can copy manual and automatic snapshots within the same AWS Region or to a different AWS Region within the same account. You can also share snapshots owned by other AWS accounts in the same AWS Region.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/backup_restore-copy_cluster_snapshot.html"
                            },
                            "improvementPlan": {
                                "displayText": "Use cluster snapshot copy for flexible RTO requirements",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/backup_restore-copy_cluster_snapshot.html"
                            }
                        },
                        {
                            "id": "docdb_rel2_3",
                            "title": "None of above",
                            "helpfulResource": {
                                "displayText": "-"
                            },
                            "improvementPlan": {
                                "displayText": "-"
                            }
                        }
                    ],
                    "riskRules": [
                        {
                            "condition": "docdb_rel2_1 && docdb_rel2_2 && docdb_rel2_3",
                            "risk": "NO_RISK"
                        },
                        {
                            "condition": "(!docdb_rel2_1) || (!docdb_rel2_3)",
                            "risk": "HIGH_RISK"
                        },
                        {
                            "condition": "default",
                            "risk": "MEDIUM_RISK"
                        }
                    ]
                },
                {
                    "id": "docdb_rel3",
                    "title": "How does your application handle exceptions from Amazon DocumentDB?",
                    "description": "In certain cases, such as certain types of planned maintenance, or in the unlikely event of a primary node or Availability Zone failure, Amazon DocumentDB (with MongoDB compatibility) detects the failure and replaces the primary node. So that your applications can resume database operations as quickly as possible without administrative intervention.",
                    "choices": [
                        {
                            "id": "docdb_rel3_1",
                            "title": "Implement exception handling with retry techniques",
                            "helpfulResource": {
                                "displayText": "It's important to understand the exceptions that an application should tolerate and how to handle them efficiently.",
                                "url": "https://aws.amazon.com/blogs/database/building-resilient-applications-with-amazon-documentdb-with-mongodb-compatibility-part-2-exception-handling/"
                            },
                            "improvementPlan": {
                                "displayText": "Implement exception handling with retry techniques.",
                                "url": "https://aws.amazon.com/blogs/database/building-resilient-applications-with-amazon-documentdb-with-mongodb-compatibility-part-2-exception-handling/"
                            }
                        },
                        {
                            "id": "docdb_rel3_2",
                            "title": "None of above",
                            "helpfulResource": {
                                "displayText": "-"
                            },
                            "improvementPlan": {
                                "displayText": "-"
                            }
                        }
                    ],
                    "riskRules": [
                        {
                            "condition": "docdb_rel3_1 && docdb_rel3_2",
                            "risk": "NO_RISK"
                        },
                        {
                            "condition": "(!docdb_rel3_1) || (!docdb_rel3_2)",
                            "risk": "HIGH_RISK"
                        },
                        {
                            "condition": "default",
                            "risk": "MEDIUM_RISK"
                        }
                    ]
                },
                {
                    "id": "docdb_rel4",
                    "title": "How do you manage client connections to clusters?",
                    "description": "Consider constraining database connections if you see high numbers of user connections in conjunction with decreases in instance performance and response time. The best number of user connections for your instance will vary based on your instance class and the complexity of the operations being performed.",
                    "choices": [
                        {
                            "id": "docdb_rel4_1",
                            "title": "Configure clients for connection and cursor management:",
                            "helpfulResource": {
                                "displayText": "The MongoDB drivers you use to connect to Amazon DocumentDB provide different parameters and its important to understand how these parameters impact your application behavior and what to consider when determining appropriate values for these configurations. Follow the link below to find more information.",
                                "url": "https://aws.amazon.com/blogs/database/building-resilient-applications-with-amazon-documentdb-with-mongodb-compatibility-part-1-client-configuration/"
                            },
                            "improvementPlan": {
                                "displayText": "Configure clients for connection and cursor management:",
                                "url": "https://aws.amazon.com/blogs/database/building-resilient-applications-with-amazon-documentdb-with-mongodb-compatibility-part-1-client-configuration/"
                            }
                        },
                        {
                            "id": "docdb_rel4_2",
                            "title": "Use (allowDiskUse: true) for aggregate queries",
                            "helpfulResource": {
                                "displayText": "By default, Amazon DocumentDB will utilize the hash algorithm when allowDiskUse:false is used and sort merge when allowDiskUse:true is used. For some use cases, it may be desirable to force the query optimizer to use a different algorithm.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/functional-differences.html"
                            },
                            "improvementPlan": {
                                "displayText": "Use (allowDiskUse: true) for aggregate queries",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/functional-differences.html"
                            }
                        },
                        {
                            "id": "docdb_rel4_3",
                            "title": "Terminate abandoned queries",
                            "helpfulResource": {
                                "displayText": "If a long running query is initiated and the client connection is closed, it doesn't automatically stop the query. It's recommended to proactively scan for long running queries and terminate them appropriately. "
                            },
                            "improvementPlan": {
                                "displayText": "Proactively scan for long running queries and terminate them appropriately."
                            }
                        },
                        {
                            "id": "docdb_rel4_4",
                            "title": "None of above",
                            "helpfulResource": {
                                "displayText": "-"
                            },
                            "improvementPlan": {
                                "displayText": "-"
                            }
                        }
                    ],
                    "riskRules": [
                        {
                            "condition": "docdb_rel4_1 && docdb_rel4_2 && docdb_rel4_3 && docdb_rel4_4",
                            "risk": "NO_RISK"
                        },
                        {
                            "condition": "(!docdb_rel4_1) || (!docdb_rel4_4)",
                            "risk": "HIGH_RISK"
                        },
                        {
                            "condition": "default",
                            "risk": "MEDIUM_RISK"
                        }
                    ]
                },
                {
                    "id": "docdb_rel5",
                    "title": "How do you support High Availability(HA) architecture deployments?",
                    "description": "You can achieve high availability and read scaling in Amazon DocumentDB (with MongoDB compatibility) by using replica instances. A single Amazon DocumentDB cluster supports a single primary instance and up to 15 replica instances. These instances can be distributed across Availability Zones within the cluster's Region. The primary instance accepts read and write traffic, and replica instances accept only read requests.",
                    "choices": [
                        {
                            "id": "docdb_rel5_1",
                            "title": "Use minimum of 2 instances for Auto failover",
                            "helpfulResource": {
                                "displayText": "Failover is automatically handled by Amazon DocumentDB ensuring your applications can resume database operations as quickly as possible without administrative intervention.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/failover.html"
                            },
                            "improvementPlan": {
                                "displayText": "Use minimum of 2 instances for Auto failover",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/failover.html"
                            }
                        },
                        {
                            "id": "docdb_rel5_2",
                            "title": "Select the number of instances based on availability target",
                            "helpfulResource": {
                                "displayText": "Two instances will provide 99.9% availability, 3 or more instances (each instance in a different Availability Zone) will provide 99.99% availability for the compute layer. An Amazon DocumentDB instance based cluster can have up to 16 compute instances.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/how-it-works.html"
                            },
                            "improvementPlan": {
                                "displayText": "Select number of instances based on availability target",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/how-it-works.html"
                            }
                        },
                        {
                            "id": "docdb_rel5_3",
                            "title": "Use global clusters for HA deployments across regions",
                            "helpfulResource": {
                                "displayText": "A global cluster consists of one primary region and up to five read-only secondary regions. You issue write operations directly to the primary cluster in the primary region and Amazon DocumentDB automatically replicates the data to the secondary regions using dedicated infrastructure. Latency is typically under a second.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/global-clusters.html"
                            },
                            "improvementPlan": {
                                "displayText": "Use global clusters for HA deployments across regions",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/global-clusters.html"
                            }
                        },
                        {
                            "id": "docdb_rel5_4",
                            "title": "None of above",
                            "helpfulResource": {
                                "displayText": "-"
                            },
                            "improvementPlan": {
                                "displayText": "-"
                            }
                        }
                    ],
                    "riskRules": [
                        {
                            "condition": "docdb_rel5_1 && docdb_rel5_2 && docdb_rel5_3 && docdb_rel5_4",
                            "risk": "NO_RISK"
                        },
                        {
                            "condition": "(!docdb_rel5_1) || (!docdb_rel5_2) || (!docdb_rel5_3) || (!docdb_rel5_4)",
                            "risk": "HIGH_RISK"
                        },
                        {
                            "condition": "default",
                            "risk": "MEDIUM_RISK"
                        }
                    ]
                },
                {
                    "id": "docdb_rel6",
                    "title": "How do you automate database deployments?",
                    "description": "Infrastructure as code (IaC) helps organizations achieve their DevOps goals of automation and self-service by maintaining declaration files in version control that define your application environments.lets you model, provision, and manage AWS and third-party resources by treating infrastructure as code.",
                    "choices": [
                        {
                            "id": "docdb_rel6_1",
                            "title": "Automate deployments using AWS CloudFormation",
                            "helpfulResource": {
                                "displayText": "Use an AWS CloudFormation template to create a cluster and instances in your default Amazon VPC.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/quick_start_cfn.html"
                            },
                            "improvementPlan": {
                                "displayText": "Automate deployments using AWS CloudFormation:",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/quick_start_cfn.html"
                            }
                        },
                        {
                            "id": "docdb_rel6_2",
                            "title": "Use AWS SDK for automating deployments",
                            "helpfulResource": {
                                "displayText": "You can use AWS SDK to create, delete, and modify clusters and instances.",
                                "url": "https://docs.aws.amazon.com/AWSJavaScriptSDK/v3/latest/clients/client-docdb/"
                            },
                            "improvementPlan": {
                                "displayText": "Use AWS SDK for automating deployments",
                                "url": "https://docs.aws.amazon.com/AWSJavaScriptSDK/v3/latest/clients/client-docdb/"
                            }
                        },
                        {
                            "id": "docdb_rel6_3",
                            "title": "Use AWS CLI for automating deployments",
                            "helpfulResource": {
                                "displayText": "You can use the AWS Command Line Interface (AWS CLI) to create, delete, and modify clusters and instances.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/api-reference.html"
                            },
                            "improvementPlan": {
                                "displayText": "Use AWS CLI for automating deployments",
                                "url": "https://docs.aws.amazon.com/cli/latest/reference/docdb/"
                            }
                        },
                        {
                            "id": "docdb_rel6_4",
                            "title": "Other (terraform or similar )",
                            "helpfulResource": {
                                "displayText": "-"
                            },
                            "improvementPlan": {
                                "displayText": "-"
                            }
                        },
                        {
                            "id": "docdb_rel6_5",
                            "title": "None of above",
                            "helpfulResource": {
                                "displayText": "-"
                            },
                            "improvementPlan": {
                                "displayText": "-"
                            }
                        }
                    ],
                    "riskRules": [
                        {
                            "condition": "docdb_rel6_1 && docdb_rel6_2 && docdb_rel6_3 && docdb_rel6_4 && docdb_rel6_5",
                            "risk": "NO_RISK"
                        },
                        {
                            "condition": "(!docdb_rel6_5)",
                            "risk": "HIGH_RISK"
                        },
                        {
                            "condition": "default",
                            "risk": "MEDIUM_RISK"
                        }
                    ]
                },
                {
                    "id": "docdb_rel7",
                    "title": "How do you monitor the reliability of your workload?",
                    "description": "Monitoring your Amazon DocumentDB is an important part of keeping your systems healthy and functioning optimally to determine the health and performance of your clusters and instances.",
                    "choices": [
                        {
                            "id": "docdb_rel7_1",
                            "title": "Monitor metrics and configure alarms and notifications",
                            "helpfulResource": {
                                "displayText": "Amazon DocumentDB (with MongoDB compatibility) integrates with Amazon CloudWatch so that you can gather and analyze operational metrics for your clusters. You can monitor these metrics using the CloudWatch console, the Amazon DocumentDB console, the AWS Command Line Interface (AWS CLI), or the CloudWatch API. CloudWatch also lets you set alarms so that you can be notified if a metric value breaches a threshold that you specify."
                            },
                            "improvementPlan": {
                                "displayText": "Monitor Amazon DocumentDB metrics using Amazon CloudWatch. CloudWatch also lets you set alarms so that you can be notified if a metric value breaches a threshold that you specify.",
                                "url": "https://aws.amazon.com/blogs/database/monitoring-metrics-and-setting-up-alarms-on-your-amazon-documentdb-with-mongodb-compatibility-clusters/"
                            }
                        },
                        {
                            "id": "docdb_rel7_2",
                            "title": "None of above",
                            "helpfulResource": {
                                "displayText": "-"
                            },
                            "improvementPlan": {
                                "displayText": "-"
                            }
                        }
                    ],
                    "riskRules": [
                        {
                            "condition": "docdb_rel7_1 && docdb_rel7_2",
                            "risk": "NO_RISK"
                        },
                        {
                            "condition": "(!docdb_rel7_1) || (!docdb_rel7_2)",
                            "risk": "HIGH_RISK"
                        },
                        {
                            "condition": "default",
                            "risk": "MEDIUM_RISK"
                        }
                    ]
                }
            ]
        },
        {
            "id": "docdb_sec",
            "name": "Security",
            "questions": [
                {
                    "id": "docdb_sec1",
                    "title": "How do you securely operate your Amazon DocumentDB cluster?",
                    "description": "Cloud security at AWS is the highest priority. As an AWS customer, you benefit from a data center and network architecture that are built to meet the requirements of the most security-sensitive organizations.",
                    "choices": [
                        {
                            "id": "docdb_sec1_1",
                            "title": "Use default security settings for Data-At-Rest and over the wire encryption",
                            "helpfulResource": {
                                "displayText": "You encrypt data at rest in your Amazon DocumentDB cluster by specifying the storage encryption option when you create your cluster. Storage encryption is enabled cluster-wide and is applied to all instances, including the primary instance and any replicas. It is also applied to your clusters storage volume, data, indexes, logs, automated backups, and snapshots.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/encryption-at-rest.html"
                            },
                            "improvementPlan": {
                                "displayText": "You can enable encryption at rest on an Amazon DocumentDB cluster when the cluster is provisioned using either the AWS Management Console or the AWS Command Line Interface (AWS CLI). Clusters that you create using the console have encryption at rest enabled by default. Clusters that you create using the AWS CLI have encryption at rest disabled by default. Therefore, you must explicitly enable encryption at rest using the --storage-encrypted parameter. In either case, after the cluster is created, you can't change the encryption at rest option.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/encryption-at-rest.html"
                            }
                        },
                        {
                            "id": "docdb_sec1_2",
                            "title": "Use TLS 1.2 and above",
                            "helpfulResource": {
                                "displayText": "You use AWS published API calls to access Amazon DocumentDB through the network. Clients must support TLS (Transport Layer Security) 1.0. We recommend TLS 1.2 or later. Clients must also support cipher suites with perfect forward secrecy (PFS) such as Ephemeral Diffie-Hellman (DHE) or Elliptic Curve Ephemeral Diffie-Hellman (ECDHE)",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/security.infrastructure.html"
                            },
                            "improvementPlan": {
                                "displayText": "Encryption in transit for an Amazon DocumentDB cluster is managed via the TLS parameter in a cluster parameter group. You can manage your Amazon DocumentDB cluster TLS settings using the AWS Management Console or the AWS Command Line Interface (AWS CLI).",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/security.encryption.ssl.html"
                            }
                        },
                        {
                            "id": "docdb_sec1_3",
                            "title": "None of above",
                            "helpfulResource": {
                                "displayText": "-"
                            },
                            "improvementPlan": {
                                "displayText": "-"
                            }
                        }
                    ],
                    "riskRules": [
                        {
                            "condition": "docdb_sec1_1 && docdb_sec1_2 && docdb_sec1_3",
                            "risk": "NO_RISK"
                        },
                        {
                            "condition": "(!docdb_sec1_1) || (!docdb_sec1_3)",
                            "risk": "HIGH_RISK"
                        },
                        {
                            "condition": "default",
                            "risk": "MEDIUM_RISK"
                        }
                    ]
                },
                {
                    "id": "docdb_sec2",
                    "title": "How do you limit Amazon DocumentDB access to other services and applications?",
                    "description": "For security best practices, you must use AWS Identity and Access Management (IAM) accounts to control access to Amazon DocumentDB API operations, especially operations that create, modify, or delete Amazon DocumentDB resources. Such resources include clusters, security groups, and parameter groups.",
                    "choices": [
                        {
                            "id": "docdb_sec2_1",
                            "title": "Configure security group to limit surface area of attack",
                            "helpfulResource": {
                                "displayText": "For security best practices, a security group controls the traffic that is allowed to reach and leave the resources that it is associated with.",
                                "url": "https://docs.aws.amazon.com/vpc/latest/userguide/VPC_SecurityGroups.html"
                            },
                            "improvementPlan": {
                                "displayText": "Leverage security groups as the primary mechanism for controlling network access to VPCs.",
                                "url": "https://docs.aws.amazon.com/vpc/latest/userguide/VPC_SecurityGroups.html#VPCSecurityGroups"
                            }
                        },
                        {
                            "id": "docdb_sec2_2",
                            "title": "Create IAM users with least access privilege. Avoid use of root credentials",
                            "helpfulResource": {
                                "displayText": "Access to manage Amazon DocumentDB (with MongoDB compatibility) resources such as clusters, instances, and cluster parameter groups requires credentials that AWS can use to authenticate your requests. Those credentials must have permissions to access AWS resources, such as an Amazon DocumentDB instance.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/security.IAM.html"
                            },
                            "improvementPlan": {
                                "displayText": "You must also use IAM to control actions that perform common administrative actions such as backing up restoring clusters. When creating IAM roles, employ the principle of least privilege.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/best_practices.html#best_practices-security"
                            }
                        },
                        {
                            "id": "docdb_sec2_3",
                            "title": "None of above",
                            "helpfulResource": {
                                "displayText": "-"
                            },
                            "improvementPlan": {
                                "displayText": "-"
                            }
                        }
                    ],
                    "riskRules": [
                        {
                            "condition": "docdb_sec2_1 && docdb_sec2_2 && docdb_sec2_3",
                            "risk": "NO_RISK"
                        },
                        {
                            "condition": "(!docdb_sec2_1) || (!docdb_sec2_3)",
                            "risk": "HIGH_RISK"
                        },
                        {
                            "condition": "default",
                            "risk": "MEDIUM_RISK"
                        }
                    ]
                },
                {
                    "id": "docdb_sec3",
                    "title": "How do you ensure secure application connections to Amazon DocumentDBAmazon DocumentDB?",
                    "description": "AWS Secrets Manager helps you protect secrets needed to access your applications, services, and IT resources. The service enables you to easily rotate, manage, and retrieve database credentials, API keys, and other secrets throughout their lifecycle. Users and applications retrieve secrets with a call to AWS Secrets Manager API, eliminating the need to hardcode sensitive information in plain text.",
                    "choices": [
                        {
                            "id": "docdb_sec3_1",
                            "title": "Isolate credentials from application.",
                            "helpfulResource": {
                                "displayText": "An application often uses a single Amazon DocumentDB cluster as its datastore but has multiple users that require authorization to perform specific operations. Some users may need to read and write data, whereas other users may only require read access. Do not store credentials in code, instead retrieve them from a secure location such as Secrets Manager.",
                                "url": "https://catalog.us-east-1.prod.workshops.aws/workshops/464d6c17-9faa-4fef-ac9f-dd49610174d3/en-US/security/rbac/leastprivilege"
                            },
                            "improvementPlan": {
                                "displayText": "The principle of least privilege is a foundational security practice. You can use RBAC to apply this principle by limiting user access to only what is required to perform their functions.",
                                "url": "https://catalog.us-east-1.prod.workshops.aws/workshops/464d6c17-9faa-4fef-ac9f-dd49610174d3/en-US/security/rbac/leastprivilege"
                            }
                        },
                        {
                            "id": "docdb_sec3_2",
                            "title": "Use Secrets Manager to retrieve Amazon DocumentDB credentials.",
                            "helpfulResource": {
                                "displayText": "AWS Secrets Manager helps you protect secrets needed to access your applications, services, and IT resources. The service enables you to easily rotate, manage, and retrieve database credentials, API keys, and other secrets throughout their lifecycle.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/security_best_practices.html"
                            },
                            "improvementPlan": {
                                "displayText": "Create secrets in AWS Secrets Manager that contains your Amazon DocumentDB cluster endpoint, userid, and password.",
                                "url": "https://catalog.us-east-1.prod.workshops.aws/workshops/464d6c17-9faa-4fef-ac9f-dd49610174d3/en-US/security/secretsmanager"
                            }
                        },
                        {
                            "id": "docdb_sec3_3",
                            "title": "Use external secrets store (Vault or similar)",
                            "helpfulResource": {
                                "displayText": "Many customers choose to centralize the management of secrets outside by using external secret stores, such as Vault or similar, to improve the security, management, and auditability of their secret usage."
                            },
                            "improvementPlan": {
                                "displayText": "Configure AWS Secrets Manager to automatically rotate the secrets for Amazon DocumentDB. For more information, see Rotating Your AWS Secrets Manager Secrets and Rotating Secrets for Amazon DocumentDB in the AWS Secrets Manager User Guide.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/best_practices.html#best_practices-security"
                            }
                        },
                        {
                            "id": "docdb_sec3_4",
                            "title": "None of above",
                            "helpfulResource": {
                                "displayText": "-"
                            },
                            "improvementPlan": {
                                "displayText": "-"
                            }
                        }
                    ],
                    "riskRules": [
                        {
                            "condition": "docdb_sec3_1 && docdb_sec3_2 && docdb_sec3_3 && docdb_sec3_4",
                            "risk": "NO_RISK"
                        },
                        {
                            "condition": "(!docdb_sec3_1) || (!docdb_sec3_2) || (!docdb_sec3_3) || (!docdb_sec3_4)",
                            "risk": "HIGH_RISK"
                        },
                        {
                            "condition": "default",
                            "risk": "MEDIUM_RISK"
                        }
                    ]
                },
                {
                    "id": "docdb_sec4",
                    "title": "How do you control access to Amazon DocumentDB resources?",
                    "description": "Every AWS resource is owned by an AWS account, and permissions to create or access the resources are governed by permissions policies. An account administrator can attach permissions policies to IAM identities (that is, users, groups, and roles), and some services (such as AWS Lambda) also support attaching permissions policies to resources.",
                    "choices": [
                        {
                            "id": "docdb_sec4_1",
                            "title": "Use AWS IAM to control access to Amazon DocumentDB resources",
                            "helpfulResource": {
                                "displayText": "Access to manage Amazon DocumentDB (with MongoDB compatibility) resources such as clusters, instances, and cluster parameter groups requires credentials that AWS can use to authenticate your requests. Those credentials must have permissions to access AWS resources, such as an Amazon DocumentDB instance. ",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/security.IAM.html"
                            },
                            "improvementPlan": {
                                "displayText": "Every AWS resource is owned by an AWS account, and permissions to create or access the resources are governed by permissions policies. An account administrator can attach permissions policies to IAM identities (that is, users, groups, and roles), and some services (such as AWS Lambda) also support attaching permissions policies to resources.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/UsingWithRDS.IAM.AccessControl.Overview.html"
                            }
                        },
                        {
                            "id": "docdb_sec4_2",
                            "title": "None of above",
                            "helpfulResource": {
                                "displayText": "-"
                            },
                            "improvementPlan": {
                                "displayText": "-"
                            }
                        }
                    ],
                    "riskRules": [
                        {
                            "condition": "docdb_sec4_1 && docdb_sec4_2",
                            "risk": "NO_RISK"
                        },
                        {
                            "condition": "(!docdb_sec4_2)",
                            "risk": "HIGH_RISK"
                        },
                        {
                            "condition": "default",
                            "risk": "MEDIUM_RISK"
                        }
                    ]
                },
                {
                    "id": "docdb_sec5",
                    "title": "What are your database auditing requirements?",
                    "description": "You can audit events that were performed in your cluster. Examples of logged events include successful and failed authentication attempts, dropping a collection in a database, or creating an index. By default, auditing is disabled on Amazon DocumentDB and requires that you opt in to use this feature.",
                    "choices": [
                        {
                            "id": "docdb_sec5_1",
                            "title": "Enable audit logging",
                            "helpfulResource": {
                                "displayText": "With Amazon DocumentDB (with MongoDB compatibility), you can audit events that were performed in your cluster. Examples of logged events include successful and failed authentication attempts, dropping a collection in a database, or creating an index.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/event-auditing.html"
                            },
                            "improvementPlan": {
                                "displayText": "By default, auditing is disabled on Amazon DocumentDB and requires that you opt in to use this feature.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/event-auditing.html#event-auditing-enabling-auditing"
                            }
                        },
                        {
                            "id": "docdb_sec5_2",
                            "title": "Set alarms for anti-patterns",
                            "helpfulResource": {
                                "displayText": "Automate triggering of alarmas when metrics cross certain thresholds. That way you can alert your operations team, open tickets in your operations systems, or even start an automated response in certain scenarios.",
                                "url": "https://catalog.us-east-1.prod.workshops.aws/workshops/464d6c17-9faa-4fef-ac9f-dd49610174d3/en-US/monitoring/alarms"
                            },
                            "improvementPlan": {
                                "displayText": "Automate triggering of alarmas when metrics cross certain thresholds. That way you can alert your operations team, open tickets in your operations systems, or even start an automated response in certain scenarios.",
                                "url": "https://catalog.us-east-1.prod.workshops.aws/workshops/464d6c17-9faa-4fef-ac9f-dd49610174d3/en-US/monitoring/alarms"
                            }
                        },
                        {
                            "id": "docdb_sec5_3",
                            "title": "None of above",
                            "helpfulResource": {
                                "displayText": "-"
                            },
                            "improvementPlan": {
                                "displayText": "-"
                            }
                        }
                    ],
                    "riskRules": [
                        {
                            "condition": "docdb_sec5_1 && docdb_sec5_2 && docdb_sec5_3",
                            "risk": "NO_RISK"
                        },
                        {
                            "condition": "(!docdb_sec5_1) || (!docdb_sec5_3)",
                            "risk": "HIGH_RISK"
                        },
                        {
                            "condition": "default",
                            "risk": "MEDIUM_RISK"
                        }
                    ]
                },
                {
                    "id": "docdb_sec6",
                    "title": "How do you automate security best practices?",
                    "description": "To improve the ability to continuously monitor and notify when configurations in Amazon DocumentDB deviate from best practices, you can create AWS Config rules and trigger notifications immediately when the cluster modification violates compliance and standards predefined by your organization.",
                    "choices": [
                        {
                            "id": "docdb_sec6_1",
                            "title": "Use default values for security best practices",
                            "helpfulResource": {
                                "displayText": "Cloud security at AWS is the highest priority. As an AWS customer, you benefit from a data center and network architecture that are built to meet the requirements of the most security-sensitive organizations."
                            },
                            "improvementPlan": {
                                "displayText": "For security best practices, you must use AWS Identity and Access Management (IAM) accounts to control access to Amazon DocumentDB API operations, especially operations that create, modify, or delete Amazon DocumentDB resources. Such resources include clusters, security groups, and parameter groups. You must also use IAM to control actions that perform common administrative actions such as backing up restoring clusters. When creating IAM roles, employ the principle of least privilege.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/best_practices.html#best_practices-security"
                            }
                        },
                        {
                            "id": "docdb_sec6_2",
                            "title": "Use AWS config to enforce compliance",
                            "helpfulResource": {
                                "displayText": "AWS Config allows you to create rules and configure resources so they comply with the standards enforced by your organization. These rules are configured to be evaluated either periodically or every time a configuration change occurs to validate if the change has violated the rule.",
                                "url": "https://aws.amazon.com/blogs/database/evaluate-amazon-documentdb-with-mongodb-compatibility-configurations-using-aws-config/"
                            },
                            "improvementPlan": {
                                "displayText": "Set up AWS Config to evaluate Amazon DocumentDB configurations. AWS Config checks for compliance rules such as backup retention policy changes and triggers a notification by sending an event to Amazon EventBridge, a serverless event bus. This event is created when a noncompliant configuration change is detected, such as a new cluster created with a backup retention period that doesnt match an organizations Recovery Point Objective (RPO) requirements. Because we have a handle on the event, we can proactively remediate the noncompliant action using an AWS Lambda function and trigger a notification informing the stakeholders about the change. In the backup retention policy example, our Lambda function modifies the cluster and updates its backup retention policy to be compliant again.",
                                "url": "https://aws.amazon.com/blogs/database/evaluate-amazon-documentdb-with-mongodb-compatibility-configurations-using-aws-config/"
                            }
                        },
                        {
                            "id": "docdb_sec6_3",
                            "title": "None of above",
                            "helpfulResource": {
                                "displayText": "-"
                            },
                            "improvementPlan": {
                                "displayText": "-"
                            }
                        }
                    ],
                    "riskRules": [
                        {
                            "condition": "docdb_sec6_1 && docdb_sec6_2 && docdb_sec6_3",
                            "risk": "NO_RISK"
                        },
                        {
                            "condition": "(!docdb_sec6_1) || (!docdb_sec6_3)",
                            "risk": "HIGH_RISK"
                        },
                        {
                            "condition": "default",
                            "risk": "MEDIUM_RISK"
                        }
                    ]
                }
            ]
        },
        {
            "id": "docdb_cost",
            "name": "Cost Optimization",
            "questions": [
                {
                    "id": "docdb_cost1",
                    "title": "How does your workload characteristics vary for sustained and peak traffic?",
                    "description": "Cluster instances need to be appropriately sized to keep all working set memory. This avoids the need to continuously read index pages from the storage volume, which negatively impacts performance and generates higher I/O costs.",
                    "choices": [
                        {
                            "id": "docdb_cost1_1",
                            "title": "Size instances for sustained load and scale on demand for peak load",
                            "helpfulResource": {
                                "displayText": "One of the most critical aspects of choosing an instance size in Amazon DocumentDB is the amount of RAM for your cache. Amazon DocumentDB reserves one-third of the RAM for its own services, meaning that only two-thirds of the instance RAM is available for the cache.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/best_practices.html#best_practices-instance_sizing"
                            },
                            "improvementPlan": {
                                "displayText": "Use data characteristics to size workload",
                                "url": "https://sizing.cloudnativedb.com/"
                            }
                        },
                        {
                            "id": "docdb_cost1_2",
                            "title": "Use smaller instances in lower environments. Start and stop instances as needed",
                            "helpfulResource": {
                                "displayText": "During periods where you don't need an Amazon DocumentDB cluster, you can stop all instances in that cluster at once.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/db-cluster-stop-start.html"
                            },
                            "improvementPlan": {
                                "displayText": "Use smaller instances in lower environments and automate a stop/start policy to save on compute costs.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/db-cluster-stop-start.html"
                            }
                        },
                        {
                            "id": "docdb_cost1_3",
                            "title": "None of above",
                            "helpfulResource": {
                                "displayText": "-"
                            },
                            "improvementPlan": {
                                "displayText": "-"
                            }
                        }
                    ],
                    "riskRules": [
                        {
                            "condition": "docdb_cost1_1 && docdb_cost1_2 && docdb_cost1_3",
                            "risk": "NO_RISK"
                        },
                        {
                            "condition": "(!docdb_cost1_1) || (!docdb_cost1_3)",
                            "risk": "HIGH_RISK"
                        },
                        {
                            "condition": "default",
                            "risk": "MEDIUM_RISK"
                        }
                    ]
                },
                {
                    "id": "docdb_cost2",
                    "title": "Do you utilize complex analytical queries for adhoc reporting?",
                    "description": "One of the best ways to improve cluster performance is to tune your most commonly used and most resource-intensive queries to make them less expensive to run.",
                    "choices": [
                        {
                            "id": "docdb_cost2_1",
                            "title": "Start instances with higher compute for adhoc reporting and stop when done",
                            "helpfulResource": {
                                "displayText": "For cases when intensive reporting queries are needed, spin up a larger compute instance or scale up an existing replica instance. Use the instance endpoint to connect and run the analytics queries. Spin back down when done.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/db-instance-classes.html"
                            },
                            "improvementPlan": {
                                "displayText": "Start instances with higher compute for adhoc reporting and stop when done",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/db-instance-classes.html"
                            }
                        },
                        {
                            "id": "docdb_cost2_2",
                            "title": "Optimize inefficient queries",
                            "helpfulResource": {
                                "displayText": "One of the best ways to improve cluster performance is to tune your most commonly used and most resource-intensive queries to make them less expensive to run.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/best_practices.html"
                            },
                            "improvementPlan": {
                                "displayText": "Use the profiler to log the execution time and details of operations that were performed on your cluster. Performance Insights is another useful tool to identify less efficient queries.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/profiling.html"
                            }
                        },
                        {
                            "id": "docdb_cost2_3",
                            "title": "None of above",
                            "helpfulResource": {
                                "displayText": "-"
                            },
                            "improvementPlan": {
                                "displayText": "-"
                            }
                        }
                    ],
                    "riskRules": [
                        {
                            "condition": "docdb_cost2_1 && docdb_cost2_2 && docdb_cost2_3",
                            "risk": "NO_RISK"
                        },
                        {
                            "condition": "(!docdb_cost2_1) || (!docdb_cost2_2) || (!docdb_cost2_3)",
                            "risk": "HIGH_RISK"
                        },
                        {
                            "condition": "default",
                            "risk": "MEDIUM_RISK"
                        }
                    ]
                },
                {
                    "id": "docdb_cost3",
                    "title": "How often does your application perform update operations?",
                    "description": "While indexes can improve query performance by avoiding the need to scan every document in a collection, this improvement comes with a tradeoff. For every document write (insert/update/delete) in a collection, each index has to be updated as well. The more indexes present, the more potential write overhead.",
                    "choices": [
                        {
                            "id": "docdb_cost3_1",
                            "title": "Separate mutable and immutable portions of document",
                            "helpfulResource": {
                                "displayText": "Access patterns for the application dictate the schema structure of documents stored in the database. Schema flexibility offered by JSON allows you to make changes quickly, making document databases an ideal choice for agile development.",
                                "url": "https://aws.amazon.com/blogs/database/document-modeling-with-amazon-documentdb-and-hackolade/"
                            },
                            "improvementPlan": {
                                "displayText": "Access patterns  Storing infrequently accessed fields in a separate document helps reduce I/O utilization and improve performance. When mutable and immutable parts of the documents are separated, performance and I/O optimization is optimized because updates modify smaller mutable documents.",
                                "url": "https://aws.amazon.com/blogs/database/document-modeling-with-amazon-documentdb-and-hackolade/"
                            }
                        },
                        {
                            "id": "docdb_cost3_2",
                            "title": "Use Amazon S3 to store images and store link and metadata in Amazon DocumentDB",
                            "helpfulResource": {
                                "displayText": "Leverage Amazon Simple Storage Service (Amazon S3) for storing binary files, in Amazon DocumentDB store the metadata of those files.",
                                "url": "https://aws.amazon.com/blogs/database/migrate-an-application-from-using-gridfs-to-using-amazon-s3-and-amazon-documentdb-with-mongodb-compatibility/"
                            },
                            "improvementPlan": {
                                "displayText": "-"
                            }
                        },
                        {
                            "id": "docdb_cost3_3",
                            "title": "Remove unused indexes",
                            "helpfulResource": {
                                "displayText": "It's recommended to create indexes only on fields that are commonly utilized as a filter and regularly look for unused indexes. For more information see the link below.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/user_diagnostics.html#user_diagnostics-identify_unused_indexes"
                            },
                            "improvementPlan": {
                                "displayText": "It's recommended to create indexes only on fields that are commonly utilized as a filter and regularly look for unused indexes. For more information, see How Do I Identify Unused Indexes?.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/user_diagnostics.html#user_diagnostics-identify_unused_indexes"
                            }
                        },
                        {
                            "id": "docdb_cost3_4",
                            "title": "Optimize working set by moving least accessed documents to different collection",
                            "helpfulResource": {
                                "displayText": "Archive historical data or leverage the rolling collection strategy to reduce storage foot print and memory requirements.",
                                "url": "https://aws.amazon.com/blogs/database/archive-data-from-amazon-documentdb-with-mongodb-compatibility-to-amazon-s3/"
                            },
                            "improvementPlan": {
                                "displayText": "Archive historical data or leverage the rolling collection strategy to reduce storage foot print and memory requirements.",
                                "url": "https://aws.amazon.com/blogs/database/archive-data-from-amazon-documentdb-with-mongodb-compatibility-to-amazon-s3/"
                            }
                        },
                        {
                            "id": "docdb_cost3_5",
                            "title": "None of above",
                            "helpfulResource": {
                                "displayText": "-"
                            },
                            "improvementPlan": {
                                "displayText": "-"
                            }
                        }
                    ],
                    "riskRules": [
                        {
                            "condition": "docdb_cost3_1 && docdb_cost3_2 && docdb_cost3_3 && docdb_cost3_4 && docdb_cost3_5",
                            "risk": "NO_RISK"
                        },
                        {
                            "condition": "(!docdb_cost3_1) || (!docdb_cost3_2) || (!docdb_cost3_3) || (!docdb_cost3_5)",
                            "risk": "HIGH_RISK"
                        },
                        {
                            "condition": "default",
                            "risk": "MEDIUM_RISK"
                        }
                    ]
                },
                {
                    "id": "docdb_cost4",
                    "title": "How do you purge older data from your collections?",
                    "description": "Identifying and removing or expiry unused document, indexes and snapshot is a best practice that we recommend performing on a regular basis.",
                    "choices": [
                        {
                            "id": "docdb_cost4_1",
                            "title": "Use rolling collections over TTL",
                            "helpfulResource": {
                                "displayText": "Document deletion resulting from TTL index expiry is a best effort process. Documents are not guaranteed to be deleted within any specific period. Factors like instance size, instance resource utilization, document size, overall throughput, the number of indexes, and whether indexes and the working set fit in memory can all affect the timing of when expired documents are deleted by the TTL process.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/best_practices.html"
                            },
                            "improvementPlan": {
                                "displayText": "For time-series workloads, you can consider creating rolling collections instead of a TTL index as rolling collections can be a more performant way to delete data and less I/O intensive.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/best_practices.html"
                            }
                        },
                        {
                            "id": "docdb_cost4_2",
                            "title": "Delete unused manual snapshots",
                            "helpfulResource": {
                                "displayText": "You can create a manual snapshot using either the AWS Management Console or AWS CLI. The amount of time it takes to create a snapshot varies with the size of your databases. When you create a snapshot, you must do the following:",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/backup_restore-create_manual_cluster_snapshot.html"
                            },
                            "improvementPlan": {
                                "displayText": "To delete a unsed manual cluster snapshot using the AWS Management Console",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/backup_restore-delete_cluster_snapshot.html"
                            }
                        },
                        {
                            "id": "docdb_cost4_3",
                            "title": "None of above",
                            "helpfulResource": {
                                "displayText": "-"
                            },
                            "improvementPlan": {
                                "displayText": "-"
                            }
                        }
                    ],
                    "riskRules": [
                        {
                            "condition": "docdb_cost4_1 && docdb_cost4_2 && docdb_cost4_3",
                            "risk": "NO_RISK"
                        },
                        {
                            "condition": "(!docdb_cost4_3)",
                            "risk": "HIGH_RISK"
                        },
                        {
                            "condition": "default",
                            "risk": "MEDIUM_RISK"
                        }
                    ]
                },
                {
                    "id": "docdb_cost5",
                    "title": "Do you cleanse data after migrating to Amazon DocumentDB?",
                    "description": "Cluster instances need to be appropriately sized to keep all working set memory. This avoids the need to continuously read index pages from the storage volume, which negatively impacts performance and generates higher I/O costs",
                    "choices": [
                        {
                            "id": "docdb_cost5_1",
                            "title": "Perform data cleansing before migrating data to Amazon DocumentDB",
                            "helpfulResource": {
                                "displayText": "Cluster instances need to be appropriately sized to keep all working set memory. This avoids the need to continuously read index pages from the storage volume, which negatively impacts performance and generates higher I/O costs.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/best_practices.html#best_practices-cost_optimization"
                            },
                            "improvementPlan": {
                                "displayText": "For best performance, minimize the number of indexes in your collections, adding only those indexes necessary to improve performance for common queries. While workloads vary, a good guideline is to keep the number of indexes per collection to five or fewer.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/best_practices.html#best_practices-cost_optimization"
                            }
                        },
                        {
                            "id": "docdb_cost5_2",
                            "title": "None of above",
                            "helpfulResource": {
                                "displayText": "-"
                            },
                            "improvementPlan": {
                                "displayText": "-"
                            }
                        }
                    ],
                    "riskRules": [
                        {
                            "condition": "docdb_cost5_1 && docdb_cost5_2",
                            "risk": "NO_RISK"
                        },
                        {
                            "condition": "(!docdb_cost5_1) || (!docdb_cost5_2)",
                            "risk": "HIGH_RISK"
                        },
                        {
                            "condition": "default",
                            "risk": "MEDIUM_RISK"
                        }
                    ]
                },
                {
                    "id": "docdb_cost6",
                    "title": "How do you monitor usage and cost for Amazon DocumentDB?",
                    "description": "You must regularly report on cost and usage optimization within your organization. You can implement dedicated sessions to cost optimization, or include cost optimization in your regular operational reporting cycles for your workloads.",
                    "choices": [
                        {
                            "id": "docdb_cost6_1",
                            "title": "Monitor metrics and set billing alarms",
                            "helpfulResource": {
                                "displayText": "Create billing alerts at thresholds of 50 percent and 75 percent of your expected bill for the month. For more information about creating billing alerts see the link below.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/best_practices.html#best_practices-performance"
                            },
                            "improvementPlan": {
                                "displayText": "Create billing alerts at thresholds of 50 percent and 75 percent of your expected bill for the month. For more information about creating billing alerts, see Creating a Billing Alarm.",
                                "url": "https://docs.aws.amazon.com//AmazonCloudWatch/latest/monitoring/monitor_estimated_charges_with_cloudwatch.html#creating_billing_alarm_with_wizard"
                            }
                        },
                        {
                            "id": "docdb_cost6_2",
                            "title": "Use cost allocation tags to track expense at a granular level",
                            "helpfulResource": {
                                "displayText": "In AWS, a tag is a label that you assign to an AWS resource, such as an Amazon DocumentDB cluster or instance. Tags enable you to categorize your AWS resources in different ways (for example, by purpose, owner, or environment), and you can use tags for cost allocation, access control, and automation.",
                                "url": "https://aws.amazon.com/blogs/database/using-cost-allocation-tags-with-amazon-documentdb-with-mongodb-compatibility/"
                            },
                            "improvementPlan": {
                                "displayText": "Use cost allocation tags to track expense at a granular level",
                                "url": "https://aws.amazon.com/blogs/database/using-cost-allocation-tags-with-amazon-documentdb-with-mongodb-compatibility/"
                            }
                        },
                        {
                            "id": "docdb_cost6_3",
                            "title": "None of above",
                            "helpfulResource": {
                                "displayText": "-"
                            },
                            "improvementPlan": {
                                "displayText": "-"
                            }
                        }
                    ],
                    "riskRules": [
                        {
                            "condition": "docdb_cost6_1 && docdb_cost6_2 && docdb_cost6_3",
                            "risk": "NO_RISK"
                        },
                        {
                            "condition": "(!docdb_cost6_1) || (!docdb_cost6_3)",
                            "risk": "HIGH_RISK"
                        },
                        {
                            "condition": "default",
                            "risk": "MEDIUM_RISK"
                        }
                    ]
                },
                {
                    "id": "docdb_cost7",
                    "title": "How do you meet cost targets when you select resource type, size and number?",
                    "description": "Right sizing is an ongoing process and its the most effective way to control cloud costs. It involves continually analyzing instance performance and usage needs and patternsand then turning off idle instances and rightsizing instances that are either overprovisioned or poorly matched to the workload.",
                    "choices": [
                        {
                            "id": "docdb_cost7_1",
                            "title": "Choose appropriate instance size and number of instances",
                            "helpfulResource": {
                                "displayText": "Use this simple form to provide aggregated input for your workload to determine cluster sizing.\n\nThis form provides sizing recommendation for a single collection in the cluster.",
                                "url": "https://sizing.cloudnativedb.com/"
                            },
                            "improvementPlan": {
                                "displayText": "Use data characteristics to size workload",
                                "url": "https://sizing.cloudnativedb.com/"
                            }
                        },
                        {
                            "id": "docdb_cost7_2",
                            "title": "Select most cost effective instance type, size and number",
                            "helpfulResource": {
                                "displayText": "One of the most critical aspects of choosing an instance size in Amazon DocumentDB is the amount of RAM for your cache. Amazon DocumentDB reserves one-third of the RAM for its own services, meaning that only two-thirds of the instance RAM is available for the cache.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/best_practices.html#best_practices-instance_sizing"
                            },
                            "improvementPlan": {
                                "displayText": "Use the third party Amazon DocumentDB sizing calculator to estimate the instance size for a particular workload.",
                                "url": "https://sizing.cloudnativedb.com/"
                            }
                        },
                        {
                            "id": "docdb_cost7_3",
                            "title": "None of above",
                            "helpfulResource": {
                                "displayText": "-"
                            },
                            "improvementPlan": {
                                "displayText": "-"
                            }
                        }
                    ],
                    "riskRules": [
                        {
                            "condition": "docdb_cost7_1 && docdb_cost7_2 && docdb_cost7_3",
                            "risk": "NO_RISK"
                        },
                        {
                            "condition": "(!docdb_cost7_1) || (!docdb_cost7_3)",
                            "risk": "HIGH_RISK"
                        },
                        {
                            "condition": "default",
                            "risk": "MEDIUM_RISK"
                        }
                    ]
                }
            ]
        },
        {
            "id": "docdb_sust",
            "name": "Sustainability",
            "questions": [
                {
                    "id": "docdb_sust1",
                    "title": "How do you monitor your Amazon DocumentDB usage?",
                    "description": "Monitor your Amazon DocumentDB usage and regularly asses the usage to identify downscaling opprtunities.",
                    "choices": [
                        {
                            "id": "docdb_sust1_1",
                            "title": "Monitoring is done using CloudWatch",
                            "helpfulResource": {
                                "displayText": "You can monitor Amazon DocumentDB using CloudWatch, which collects near real-time metrics.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/cloud_watch.html"
                            },
                            "improvementPlan": {
                                "displayText": "Monitor Amazon DocumentDB using CloudWatch and track usage over a veriod of time.",
                                "url": "https://aws.amazon.com/blogs/database/monitoring-metrics-and-setting-up-alarms-on-your-amazon-documentdb-with-mongodb-compatibility-clusters"
                            }
                        },
                        {
                            "id": "docdb_sust1_2",
                            "title": "Monitoring is done using Performance Insights",
                            "helpfulResource": {
                                "displayText": "You can monitor Amazon DocumentDB using Performance Insights, which helps you visualize the database load and filter the load by waits, query statements, hosts, or application.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/performance-insights.html"
                            },
                            "improvementPlan": {
                                "displayText": "Monitor Amazon DocumentDB using Performance Insights and analyze the usage.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/performance-insights-analyzing.html"
                            }
                        },
                        {
                            "id": "docdb_sust1_3",
                            "title": "None of above",
                            "helpfulResource": {
                                "displayText": "-"
                            },
                            "improvementPlan": {
                                "displayText": "-"
                            }
                        }
                    ],
                    "riskRules": [
                        {
                            "condition": "docdb_sust1_1 && docdb_sust1_2 && docdb_cost1_3",
                            "risk": "NO_RISK"
                        },
                        {
                            "condition": "(!docdb_sust1_1) || (!docdb_sust1_3)",
                            "risk": "HIGH_RISK"
                        },
                        {
                            "condition": "default",
                            "risk": "MEDIUM_RISK"
                        }
                    ]
                },
                {
                    "id": "docdb_sust2",
                    "title": "How do you detect and decommission unused resources?",
                    "description": "How do you detect and decommission unused resources?",
                    "choices": [
                        {
                            "id": "docdb_sust2_1",
                            "title": "Automated actions are triggered from Alarms based on CloudWatch Metrics",
                            "helpfulResource": {
                                "displayText": "An alarm watches a single metric over a time period you specify, and performs one or more actions based on the value of the metric relative to a given threshold over a number of time periods.",
                                "url": "https://catalog.us-east-1.prod.workshops.aws/workshops/464d6c17-9faa-4fef-ac9f-dd49610174d3/en-US/monitoring/alarms"
                            },
                            "improvementPlan": {
                                "displayText": "Use CloudWatch metrics to identify if resources are unused. An underutilized compute instance can be a candidate for deletion or downscaling.",
                                "url": "https://catalog.us-east-1.prod.workshops.aws/workshops/464d6c17-9faa-4fef-ac9f-dd49610174d3/en-US/monitoring/alarms"
                            }
                        },
                        {
                            "id": "docdb_sust2_2",
                            "title": "Metrics are viewed in the AWS web console",
                            "helpfulResource": {
                                "displayText": "You can view the metrics in the Monitoring tab of each cluster or you can create your own CloudWatch dashboards.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/monitoring_docdb.html"
                            },
                            "improvementPlan": {
                                "displayText": "Keep a check on CloudWatch metrics to find unused resources.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/monitoring_docdb.html"
                            }
                        }
                    ],
                    "riskRules": [
                        {
                            "condition": "docdb_sust2_1 && docdb_sust2_2",
                            "risk": "NO_RISK"
                        },
                        {
                            "condition": "default",
                            "risk": "MEDIUM_RISK"
                        }
                    ]
                },
                {
                    "id": "docdb_sust3",
                    "title": "Can Serverless services be utilized to access Amazon DocumentDB?",
                    "description": "Can Serverless services be utilized to access DynamoDB?",
                    "choices": [
                        {
                            "id": "docdb_sust3_1",
                            "title": "Yes we prioritize using Serverless services",
                            "helpfulResource": {
                                "displayText": "Amazon DocumentDB has good integration with serverless systems, such as Lambda. Check the link below for more information.",
                                "url": "https://docs.aws.amazon.com/lambda/latest/dg/with-documentdb.html"
                            },
                            "improvementPlan": {
                                "displayText": "If the other systems used are serverless then this is good practice for sustainability.",
                                "url": "https://docs.aws.amazon.com/wellarchitected/latest/sustainability-pillar/design-principles-for-sustainability-in-the-cloud.html"
                            }
                        }
                    ],
                    "riskRules": [
                        {
                            "condition": "docdb_sust3_1",
                            "risk": "NO_RISK"
                        },
                        {
                            "condition": "default",
                            "risk": "MEDIUM_RISK"
                        }
                    ]
                },
                {
                    "id": "docdb_sust4",
                    "title": "Are you using Graviton instances?",
                    "description": "Amazon DocumentDB supports the R4, R5, R6G, T3, and T4G families of instance classes. These classes are current-generation instance classes that are optimized for memory-intensive applications.",
                    "choices": [
                        {
                            "id": "docdb_sust4_1",
                            "title": "Yes, we use R6G or T4G instances",
                            "helpfulResource": {
                                "displayText": "Consider using a more power-efficient processor instances for your Amazon DocumentDB clusters. Graviton2 delivers 2-3.5 times better CPU performance per watt than any other processor in AWS.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/db-instance-classes.html"
                            },
                            "improvementPlan": {
                                "displayText": "Use Graviton, R6G or T4G instance classes, for better efficiency and lower cost.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/db-instance-classes.html"
                            }
                        },
                        {
                            "id": "docdb_sust4_2",
                            "title": "No, using other instance classes",
                            "helpfulResource": {
                                "displayText": ""
                            },
                            "improvementPlan": {
                                "displayText": "Use Graviton, R6G or T4G instance classes, for better efficiency and lower cost.",
                                "url": "https://docs.aws.amazon.com/documentdb/latest/developerguide/db-instance-classes.html"
                            }
                        }
                    ],
                    "riskRules": [
                        {
                            "condition": "docdb_sust4_1 && docdb_sust4_2",
                            "risk": "NO_RISK"
                        },
                        {
                            "condition": "default",
                            "risk": "MEDIUM_RISK"
                        }
                    ]
                },
                {
                    "id": "docdb_sust5",
                    "title": "Can you archive old data to colder storage?",
                    "description": "Can you archive old data to colder storage?",
                    "choices": [
                        {
                            "id": "docdb_sust5_1",
                            "title": "Yes, we archive data using TTL and copy to S3 using change streams",
                            "helpfulResource": {
                                "displayText": "You can back up, or otherwise process, documents that are deleted by a TTL index and by enabling Amazon DocumentDB change streams the deleted documents can be copied to S3.",
                                "url": "https://docs.aws.amazon.com/lambda/latest/dg/with-documentdb.html"
                            },
                            "improvementPlan": {
                                "displayText": "Combining TTl index, change streams and AWS Lambda can help simplify archiving data.",
                                "url": "https://catalog.us-east-1.prod.workshops.aws/workshops/464d6c17-9faa-4fef-ac9f-dd49610174d3/en-US/change-streams"
                            }
                        }
                    ],
                    "riskRules": [
                        {
                            "condition": "docdb_sust5_1",
                            "risk": "NO_RISK"
                        },
                        {
                            "condition": "default",
                            "risk": "MEDIUM_RISK"
                        }
                    ]
                }
            ]
        }
    ]
}

